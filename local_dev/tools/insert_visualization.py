import requests

def insert_visualization(vis_id):
    # load the vis data from file
    with open(f"{vis_id}.json", "r") as f:
        data = f.read()

    payload = {}
    payload["vis_id"] = vis_id
    payload['vis_title'] = 'openaire'
    payload['vis_clean_query'] = 'DP0878177'
    payload['vis_query'] = 'DP0878177'
    payload['vis_params'] = "{\"project_id\":\"863420\",\"funder\":\"EC\",\"acronym\":\"TRIPLE\",\"title\":\"Transforming Research through Innovative Practices for Linked interdisciplinary Exploration\",\"start_date\":\"2019-10-01\",\"end_date\":\"2023-03-31\",\"special_clause\":\"false\",\"oa_mandate\":\"true\",\"organisations\":[{\"long_name\":\"OPEN ACCESS IN THE EUROPEAN AREA THROUGH SCHOLARLY COMMUNICATION\",\"name\":\"OPERAS\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=pending_org_::8e77235c99a60c0a1a3a21209ca0e0d9\",\"url\":\"23\",\"website\":\"https:\\\/\\\/www.operas-eu.org\\\/\"},{\"long_name\":\"CESSDA ERIC\",\"name\":\"CESSDA ERIC\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=pending_org_::89963b4d1d1aacf5e11126f162ced9d4\",\"url\":\"21\",\"website\":\"https:\\\/\\\/www.cessda.eu\"},{\"long_name\":\"National Research Council\",\"name\":\"CNR\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=openorgs____::d41cf6bd4ab1b1362a44397e0b95c975\",\"url\":\"1\",\"website\":\"http:\\\/\\\/cnr.it\"},{\"long_name\":\"Polish Academy of Sciences\",\"name\":\"PAN\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=openorgs____::f541cd098bd22df66e81d8b34a7238c2\",\"url\":\"11\",\"website\":\"http:\\\/\\\/www.english.pan.pl\\\/\"},{\"long_name\":\"ETHNIKO KENTRO TEKMIRIOSIS KAI ILEKTRONIKOU PERIECHOMENOU\",\"name\":\"NATIONAL DOCUMENTATION CENTER - EKT\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=pending_org_::d0053bbb2c9cb7695adfbe288607fb47\",\"url\":\"10\",\"website\":\"http:\\\/\\\/www.ekt.gr\"},{\"long_name\":\"MEOH\",\"name\":\"MEOH\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=pending_org_::b9a7cc1c6a9920dbe053d3efae57dbfe\",\"url\":\"15\",\"website\":\"http:\\\/\\\/www.meoh.io\"},{\"long_name\":\"University of Coimbra\",\"name\":\"University of Coimbra\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=openorgs____::6c93cc20a992d88c8dff2a8fbcf95034\",\"url\":\"18\",\"website\":\"http:\\\/\\\/www.uc.pt\\\/en\"},{\"long_name\":\"STICHTING OAPEN*OPEN ACCESS PUBLISHING IN EUROPEAN NETWORKS\",\"name\":\"OAPEN\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=pending_org_::2b5ba79556e43f244f0c26a6c24fd789\",\"url\":\"17\",\"website\":\"http:\\\/\\\/www.oapen.org\"},{\"long_name\":\"CLARIN ERIC\",\"name\":\"CLARIN\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=openorgs____::ae84e04d1bb09ceec2f041532ad7175c\",\"url\":\"6\",\"website\":\"http:\\\/\\\/www.clarin.eu\"},{\"long_name\":\"Max Weber Foundation International Humanities\",\"name\":\"Max Weber Foundation International Humanities\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=openorgs____::742f75a4a5e1f18ca0eabc3aabe8bada\",\"url\":\"14\",\"website\":\"http:\\\/\\\/www.maxweberstiftung.de\\\/en\\\/\"},{\"long_name\":\"LEXICAL COMPUTING CZ SRO\",\"name\":\"LEXICAL COMPUTING CZ SRO\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=pending_org_::57fd8a7587373534430b01e9d14356c7\",\"url\":\"13\",\"website\":\"http:\\\/\\\/www.lexicalcomputing.cz\"},{\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=raid________::4a6054901382c4e0eed47ccacf25fc34\",\"url\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=raid________::4a6054901382c4e0eed47ccacf25fc34\"},{\"long_name\":\"THE UNIVERSITY COURT OF THE UNIVERSITY OF ABERTAY DUNDEE\",\"name\":\"AU\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=pending_org_::ce2ac95955a865a53965139a9222c65f\",\"url\":\"5\",\"website\":\"http:\\\/\\\/www.abertay.ac.uk\"},{\"long_name\":\"University of Zadar\",\"name\":\"University of Zadar\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=openorgs____::5e91b35f34a6d4ead6432ef2f77d24bf\",\"url\":\"19\",\"website\":\"http:\\\/\\\/www.unizd.hr\\\/\"},{\"long_name\":\"CENTRE NATIONAL DE LA RECHERCHE SCIENTIFIQUE CNRS\",\"name\":\"CNRS\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=pending_org_::26e8a1e6dd6e5594324513fee4a9ef03\",\"url\":\"7\",\"website\":\"http:\\\/\\\/www.cnrs.fr\"},{\"long_name\":\"National Hellenic Research Foundation\",\"name\":\"NHRF\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=openorgs____::a8388d42d1556dd85a539cf673583737\",\"url\":\"9\",\"website\":\"http:\\\/\\\/www.eie.gr\\\/index-en.html\"},{\"long_name\":\"MEDIRI GMBH\",\"name\":\"mediri GmbH\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=pending_org_::ce951878644e3fec61c3971a2218af3a\",\"url\":\"3\",\"website\":\"http:\\\/\\\/mediri.com\"},{\"long_name\":\"Digital Research Infrastructure for the Arts and Humanities\",\"name\":\"DARIAH-EU\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=openorgs____::f0c3e27c112272a3781226c5890b228c\",\"url\":\"22\",\"website\":\"https:\\\/\\\/www.dariah.eu\\\/\"},{\"long_name\":\"Know Center\",\"name\":\"Know Center\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=openorgs____::97c459087092b424064b282a954f7000\",\"url\":\"12\",\"website\":\"http:\\\/\\\/www.know-center.tugraz.at\\\/en\\\/\"},{\"long_name\":\"Institute of Literary Research\",\"name\":\"IBL PAN\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=openorgs____::63ff1693d98443d5fbd457e85055e093\",\"url\":\"2\",\"website\":\"http:\\\/\\\/ibl.waw.pl\\\/en\"},{\"long_name\":\"FOXCUB\",\"name\":\"FOXCUB\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=pending_org_::c953b9ecd40cf9073476b90fe81ec740\",\"url\":\"20\",\"website\":\"https:\\\/\\\/foxcub.fr\\\/\"},{\"long_name\":\"European Grid Infrastructure Foundation\",\"name\":\"EGI\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=openorgs____::0998a1d4dbfc5025ad963eeb2306969c\",\"url\":\"8\",\"website\":\"http:\\\/\\\/www.egi.eu\\\/\"},{\"long_name\":\"NET7 SRL\",\"name\":\"NET7\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=pending_org_::9af4acee6dfce664c803b65b2c60b071\",\"url\":\"16\",\"website\":\"http:\\\/\\\/www.netseven.it\"},{\"long_name\":\"OPEN KNOWLEDGE MAPS - VEREIN ZUR FORDERUNG DER SICHTBARKEIT WISSENSCHAFTLICHEN WISSENS\",\"name\":\"OPEN KNOWLEDGE MAPS - VEREIN ZUR FORDERUNG DER SICHTBARKEIT WISSENSCHAFTLICHEN WISSENS\",\"org_id\":\"https:\\\/\\\/www.openaire.eu\\\/search\\\/organization?organizationId=pending_org_::f76b7a308a8069b5630399110a715935\",\"url\":\"4\",\"website\":\"http:\\\/\\\/openknowledgemaps.org\"}],\"openaire_link\":\"https:\\\/\\\/www.operas-eu.org\\\/\",\"obj_id\":\"corda__h2020::94b1b8e5309715e7aa2ab9d87dcc1dfe\",\"call_id\":\"H2020-INFRAEOSC-2019-1\",\"funding_tree\":[null,\"RIA\",\"H2020\"]}"
    payload["data"] = data

    # the post target may need to be adjusted to work with the current local docker network
    res = requests.post("http://127.0.0.1:8081/dev/persistence/createVisualization/dev",
                        json=payload)
    print(res.status_code)
    print(res.text)


def main():
    vis_ids = [
        "9d4dc6b920d1e2cc08a741f7c56821db"
    ]
    for vis_id in vis_ids:
        insert_visualization(vis_id)

if __name__ == "__main__":
    main()